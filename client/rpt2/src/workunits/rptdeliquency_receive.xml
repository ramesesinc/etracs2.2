<workunit>
    <invokers>
        <invoker type="rptdelinquency:receive"  action='init' caption="Receive Demand Letter" target="popup"/>
    </invokers>
    <code>
<![CDATA[

import com.rameses.rcp.common.*;
import com.rameses.rcp.annotations.*;
import com.rameses.osiris2.client.*;
import com.rameses.osiris2.reports.*;

public class ReceiveLetter
{
    
    @Service('RPTDelinquencyService')
    def svc;
    
    @Service('DateService') 
    def dtSvc
    
    def entity 
    
     void init() {
        entity.receiveddate = dtSvc.serverDate
     } 
    
    def update() {
        svc.receive( entity )
        return '_close'
    }
    
    def cancel() {
        if( entity.receiveddate ) entity.receiveddate = null
        if( entity.receivedby) entity.receivedby = null
        return '_close'
    }
}

    
]]>
    </code>
    <pages>
        <page template="etracs2.rpt.report.rptdelinquency.ReceivePage"/>
    </pages>
</workunit>